use b_error::BError;
use crate::lexer;
use crate::ast;

grammar;

pub ArgList: ast::PartialArgList = {
    <Argument*> => ast::PartialArgList {
        args: <>,
    },
};

Argument: ast::Argument = {
    <i:Ident> ":" <t:Type> "," => ast::Argument {
        name: i,
        type_: t,
    },
};

Ident: ast::Ident = {
    "<ident>" => ast::Ident(<>.ident_string()),
};

Type: ast::Type = {
    "I32" => ast::Type::I32,
};

extern {
    type Location = usize;
    type Error = BError;

    enum lexer::Token {
        "I32" => lexer::Token::IdentI32,
        "<ident>" => (
            lexer::Token::Ident(_)
        ),
        ":" => (
            lexer::Token::Punctuation(
                lexer::Punctuation::Colon
            )
        ),
        "," => (
            lexer::Token::Punctuation(
                lexer::Punctuation::Comma
            )
        ),
    }
}
